<!DOCTYPE HTML>
<html>
   <head>
   <meta charset="utf-8">
   <title>demo</title>
    
      <script type="text/javascript">
          var ws = new WebSocket("ws://127.0.0.1:9000");
          ws.onopen = function() {
            console.log('websocket connect');
            setStatus();
          };
          ws.onclose = function() {
            console.log('websocket close');
          }
          ws.onmessage = function(e) {
            console.log('websocket: e', e);
            appendChat(e.data)
          }
          function setStatus() {
            var _status =document.getElementById('status');
            _status.innerHTML = 'websocket connect';
          }
          function appendChat(data) {
            var el = document.getElementById('chatlist');
            var nEl = document.createElement('p');
            nEl.innerHTML = data;
            el.appendChild(nEl);
          } 
          function WebSocketTest() {
            var val = document.getElementById('chat').value;
            ws.send(val);
          }
      </script>
        
   </head>
   <body>
   
      <div>
        <input type="text" id='chat'>
         <a href="javascript:WebSocketTest()">发送</a>
      </div>
      <div>状态: <span id="status">未连接</span></div>
      <div id='chatlist'>

      </div>
   </body>
</html>